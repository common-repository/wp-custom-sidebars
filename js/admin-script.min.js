!function(e){"use strict";var t={init:function(){this._eventRunning=!1,this._vars="undefined"!=typeof wpCustomSidebarsVars?wpCustomSidebarsVars:{};var t=this;e(document).on("click",".wpcs-add-sidebar, .wpcs-remove-sidebar, .wpcs-import-data",t.doSidebar)},doSidebar:function(a){a.preventDefault();var n=t,s=e(this),i=s.data("type"),r=e('[name="wpcs_ajax_processor_nonce"]').val(),d=s.prev('[name="sidebar_name"]'),o=s.data("id"),c=e(".wpcs-wrapper").find(".spinner"),m=e("#wpcs-table"),u=e(".wpcs-notice"),p="";if("add"==i){if(o=d.val(),""==o)return void alert(n._vars.msgAddSidebarName)}else if("remove"==i){if(p=confirm(n._vars.msgConfirmRemove),!p)return}else if("import"==i&&(o=s.prev('[name="sidebar_transfer"]').val(),p=confirm(n._vars.msgConfirmImport),!p))return;n._eventRunning||(n._eventRunning=!0,c.fadeIn(function(){e(this).addClass("is-active")}),e.ajax({type:"POST",url:ajaxurl,data:{action:"wp-custom-sidebars-ajax-action",type:i,nonce:r,value:o},success:function(t){if(console.log(t),t.success&&"add"==t.data.type){d.val(""),m.append("<tr><td>"+t.data.name+"</td><td>"+t.data.id+'</td><td><button class="button button-small wpcs-remove-sidebar" data-type="remove" data-id="'+t.data.id+'">&times;</button></td></tr>');var a=m.find("tr.no-sidebar-tr");a.length&&a.remove()}else t.success&&"remove"==t.data.type?s.closest("tr").remove():t.success&&"import"==t.data.type&&setTimeout(function(){window.location.reload()},2e3);"undefined"!=typeof t.data.message&&(u.html(t.data.message),setTimeout(function(){u.html("")},5e3)),c.fadeOut(function(){e(this).removeClass("is-active")}),n._eventRunning=!1}}))}};t.init()}(jQuery);